(function(n){"use strict";function i(t){return n.tileLayer("http://{s}.tile.thunderforest.com/"+t+"/{z}/{x}/{y}.png",{attribution:'Maps © <a href="http://www.thunderforest.com/">Thunderforest<\/a>, Data © <a href="//openstreetmap.org">OpenStreetMap<\/a> contributors',detectRetina:!0,subdomains:["a","b","c"]})}function e(n){var i=[];for(var t in n)n.hasOwnProperty(t)&&i.push([t,n[t]].join("="));return i.join("&")}function o(i,r,u){function f(){var i=document.createElement("dl"),n,t;return n=document.createElement("dt"),n.textContent="Pixel value",i.appendChild(n),t=document.createElement("dd"),t.textContent=r.pixel.properties.value,i.appendChild(t),n=document.createElement("dt"),n.textContent="Elevation",i.appendChild(n),t=document.createElement("dd"),t.textContent=u,i.appendChild(t),i}return n.marker(i,{icon:n.divIcon({html:String(r.pixel.properties.value)+"&prime;",className:"elevation-div-icon",iconSize:[30,13]})}).addTo(t).bindPopup(f())}function s(n){return new Promise(function(t,i){var u={x:n.lng,y:n.lat,units:"Feet",output:"json"},r=new XMLHttpRequest;r.open("get",["http://ned.usgs.gov/epqs/pqs.php",e(u)].join("?"));r.onloadend=function(){var n=JSON.parse(this.responseText);t(n.USGS_Elevation_Point_Query_Service.Elevation_Query)};r.onerror=function(n){i(n)};r.send()})}function h(t,i){return new Promise(function(r,u){n.esri.Tasks.identifyImage({url:t}).at(i).run(function(n,t,f){n?u(n):r({latlng:i,identifyImageResponse:t,rawResponse:f})})})}function c(n){var t=h(r,n.latlng),i=s(n.latlng);Promise.all([t,i]).then(function(n){var i=n[0],t=n[1];console.debug("all response",arguments);o([t.y,t.x],i.identifyImageResponse,t.Elevation).openPopup()},function(n){console.error("all error",n)})}var t,r,u,f;r="http://hqolymgis99t/arcgis/rest/services/Airport/AirportRasterTest/ImageServer";t=n.map("map",{center:[47.413220330159461,-120.80566406246835],zoom:7,maxZoom:18});n.control.scale().addTo(t);u=n.tileLayer("//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="//openstreetmap.org">OpenStreetMap<\/a> contributors, <a href="//creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA<\/a>',detectRetina:!0}).addTo(t);f=n.esri.Layers.imageMapLayer(r,{opacity:.5}).addTo(t);n.control.layers({OpenStreetMap:u,Landscape:i("landscape"),Transport:i("transport"),"Transport Dark":i("transport-dark"),OpenCycleMap:i("cycle"),Outdoors:i("outdoors")},{"Airport Surfaces":f}).addTo(t);t.on("click",c)})(L);
//# sourceMappingURL=index.min.js.map
